"use strict";(self["webpackChunkdobby_web"]=self["webpackChunkdobby_web"]||[]).push([[593],{128:function(e,t,o){var r=o(6680);t.Z={HolidayWork:class{constructor({holidayWorkId:e,employeeNo:t,name:o,workDate:r,memo:n,rankName:i}){this.holidayWorkId=e||99999999999,this.employeeNo=t||"",this.name=o||"",this.workDate=r||"",this.memo=n||"",this.rankName=i||""}},async getHolidayWorkList({query:e="",pageNum:t=0,pageSize:o=10,year:n,month:i}){try{let s=`http://localhost:8080/holiday/work/list?pageNum=${t}&pageSize=${o}`;e&&(s+=`&query=${e}`),n&&(s+=`&year=${n}`),i&&(s+=`&month=${i}`);const a=await r.Z.GET(s);return a.result}catch(s){}},async insertHolidayWork(e){if(!e instanceof this.HolidayWork&&console.log("저장 할 데이터가 HolidayWork 형식이 아닙니다."),!e.employeeNo)return alert("사번이 선택되지 않았습니다."),!1;if(!e.workDate)return alert("날짜가 선택되지 않았습니다."),!1;const t={employeeNo:e.employeeNo,workDate:e.workDate,memo:e.memo};return await r.Z.POST("http://localhost:8080/holiday/work/save",t),!0},async updateHolidayWork(e,t){return"number"!==typeof e?(console.log("holidayWorkId가 number형식이 아닙니다."),!1):!t instanceof this.HolidayWork?(console.log("수정 할 데이터가 HolidayWork 형식이 아닙니다."),!1):t.employeeNo?t.workDate?(await r.Z.PUT(`http://localhost:8080/holiday/work/modify/${e}`,t),!0):(alert("날짜가 선택되지 않았습니다."),!1):(alert("사번이 선택되지 않았습니다."),!1)},async deleteHolidayWork(e){return"number"!==typeof e?(console.log("holidayWorkId가 number형식이 아닙니다."),!1):(await r.Z.DELETE(`http://localhost:8080/holiday/work/delete/${e}`),!0)},async getSimpleEmployeeList(){try{const e=await r.Z.GET("http://localhost:8080/employee/simple-info");return e.result}catch(e){return[]}}}},3593:function(e,t,o){o.r(t),o.d(t,{default:function(){return ce}});var r=o(3396);const n=e=>((0,r.dD)("data-v-9439127a"),e=e(),(0,r.Cn)(),e),i=n((()=>(0,r._)("div",{class:"content-header"},[(0,r._)("h1",null," 휴일 출근 관리 ")],-1)));function s(e,t,o,n,s,a){const l=(0,r.up)("HolidayWorkTableContainer");return(0,r.wg)(),(0,r.iD)(r.HY,null,[i,(0,r.Wm)(l)],64)}var a=o(7139),l=o(9242);const d={class:"content-container"},m={class:"search-input-container"},p={class:"input-group mgb-1r"},u=["value"],y=(0,r._)("option",{value:null},"월",-1),c=["value"],h={class:"input-group-append"},I={class:"paging-button-container"},g={key:1,type:"button",class:"btn btn-secondary mgb-1r mgr-1r"},b={key:3,type:"button",class:"btn btn-secondary mgb-1r"};function k(e,t,o,n,i,s){const k=(0,r.up)("EditableTable");return(0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("div",m,[(0,r._)("div",p,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.year=t),class:"year-input"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.years,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e},(0,a.zw)(e),9,u)))),256))],512),[[l.bM,e.year]]),(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.month=t),class:"month-input"},[y,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.months,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e},(0,a.zw)(e),9,c)))),256))],512),[[l.bM,e.month]]),(0,r.wy)((0,r._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=t=>e.query=t)},null,512),[[l.nr,e.query]]),(0,r._)("div",h,[(0,r._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[3]||(t[3]=(...e)=>s.searchQuery&&s.searchQuery(...e))},"검색")])]),(0,r._)("div",I,[e.hasPreviousPage?((0,r.wg)(),(0,r.iD)("button",{key:0,type:"button",class:"btn btn-info mgb-1r mgr-1r",onClick:t[4]||(t[4]=(...e)=>s.doPreviousPage&&s.doPreviousPage(...e))},"이전")):((0,r.wg)(),(0,r.iD)("button",g,"이전")),e.hasNextPage?((0,r.wg)(),(0,r.iD)("button",{key:2,type:"button",class:"btn btn-info mgb-1r",onClick:t[5]||(t[5]=(...e)=>s.doNextPage&&s.doNextPage(...e))},"다음")):((0,r.wg)(),(0,r.iD)("button",b,"다음"))])]),(0,r.Wm)(k,{"use-index":!1,"header-infos":e.headerInfos,"table-data":e.holidayWorkList,"empty-item":e.emptyItem,onInsertItem:s.insertItem,onUpdateItem:s.updateItem,onDeleteItem:s.deleteItem},null,8,["header-infos","table-data","empty-item","onInsertItem","onUpdateItem","onDeleteItem"])])}o(560);var w=o(128);const f={class:"table-container bd-solid pd-lr-1r"},N={class:"table",id:"holiday-work-table"},v={key:1},x=["colspan"];function D(e,t,o,n,i,s){const a=(0,r.up)("EditableTableHeader"),l=(0,r.up)("EditableTableRow");return(0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("table",N,[(0,r.Wm)(a,{"header-infos":o.headerInfos,"use-index":o.useIndex},null,8,["header-infos","use-index"]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.tableData,((e,t)=>((0,r.wg)(),(0,r.j4)(l,{"use-index":o.useIndex,"init-is-update":!1,"is-insert":!1,item:e,"header-infos":o.headerInfos,index:t+1,onUpdateItem:s.updateItem,onDeleteItem:s.deleteItem},null,8,["use-index","item","header-infos","index","onUpdateItem","onDeleteItem"])))),256)),e.isInsert?((0,r.wg)(),(0,r.j4)(l,{key:0,"use-index":o.useIndex,"init-is-update":!0,"init-is-insert":!0,item:o.emptyItem,"header-infos":o.headerInfos,index:0,onInsertItem:s.insertItem,onUpdateItem:s.updateItem,onDeleteItem:s.deleteItem},null,8,["use-index","item","header-infos","onInsertItem","onUpdateItem","onDeleteItem"])):((0,r.wg)(),(0,r.iD)("tr",v,[(0,r._)("td",{colspan:s.columnLength,class:"ta-c clickable",onClick:t[0]||(t[0]=(...e)=>s.useInsert&&s.useInsert(...e))},"+",8,x)]))])])])}class _{constructor({itemPropertyName:e,selectBoxItemPropertyName:t}){this._itemPropertyName=e,this._selectBoxItemPropertyName=t}get itemPropertyName(){return this._itemPropertyName}get selectBoxItemPropertyName(){return this._selectBoxItemPropertyName}}class B{constructor({key:e,value:t,view:o}){this._key=e,this._value=t,this._view=o}get key(){return this._key}get view(){return this._view}get value(){return this._value}change(e,t){if(e&&t)for(const o of t)e[o.itemPropertyName]=this._value[o.selectBoxItemPropertyName]}}class P{constructor({selectBoxListItems:e,changeInfos:t}){this._selectBoxListItems=e,this._changeInfos=t}get selectBoxListItems(){return this._selectBoxListItems}get changeInfos(){return this._changeInfos}}class H{constructor({isId:e,propertyOrder:t,propertyName:o,columnName:r,isVisible:n,isModify:i,modifyType:s,selectBoxInfo:a}){this._propertyOrder=t||999,this._isId=e,this._propertyName=o||"",this._columnName=r||"",this._isVisible=n||"undefined"===typeof n,this._isModify=i||"undefined"!==typeof s,this._modifyType="string"===typeof s?s:"text",this._selectBoxInfo=a||{}}get isId(){return this._isId}get propertyName(){return this._propertyName}get propertyOrder(){return this._propertyOrder}get columnName(){return this._columnName}get isVisible(){return this._isVisible}get isModify(){return this._isModify}get modifyType(){return this._modifyType}get selectBoxInfo(){return this._selectBoxInfo}}const E={key:0,scope:"col"},W={scope:"col"},C=(0,r._)("th",{scope:"col"},"수정",-1),T=(0,r._)("th",{scope:"col"},"삭제",-1);function U(e,t,o,n,i,s){return(0,r.wg)(),(0,r.iD)("thead",null,[(0,r._)("tr",null,[o.useIndex?((0,r.wg)(),(0,r.iD)("th",E,"순번")):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.orderedHeaders,(e=>((0,r.wg)(),(0,r.iD)("th",W,(0,a.zw)(e),1)))),256)),C,T])])}var L={name:"EditableTableHeader",props:{useIndex:Boolean,headerInfos:Array},computed:{orderedHeaders(){return this.headerInfos.sort(((e,t)=>e.propertyOrder-t.propertyOrder)).filter((e=>e.isVisible)).map((e=>e.columnName))}}},O=o(89);const Z=(0,O.Z)(L,[["render",U]]);var V=Z;const $={key:0},z={key:0,class:"editable-td"},Y=["onUpdate:modelValue"],q={key:1,class:"editable-td"},S=["onChange"],M=(0,r._)("option",null,"선택",-1),Q=["value"],A={key:2,class:"editable-td"},j=["onUpdate:modelValue"],K={key:3,class:"editable-td"},R={key:0,class:"editable-td"},F={key:1,class:"editable-td"},G={key:2,class:"editable-td"},J={key:3,class:"editable-td"},X={class:"editable-button"},ee={class:"editable-button"};function te(e,t,o,n,i,s){return(0,r.wg)(),(0,r.iD)("tr",null,[o.useIndex?((0,r.wg)(),(0,r.iD)("td",$,(0,a.zw)(o.index),1)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.headerInfos,(t=>((0,r.wg)(),(0,r.iD)(r.HY,null,[t.isVisible?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[t.isModify&&e.isUpdate?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},["text"===t.modifyType?((0,r.wg)(),(0,r.iD)("td",z,[(0,r.wy)((0,r._)("input",{class:"form-control",type:"text","onUpdate:modelValue":e=>o.item[t.propertyName]=e},null,8,Y),[[l.nr,o.item[t.propertyName]]])])):"selectBox"===t.modifyType?((0,r.wg)(),(0,r.iD)("td",q,[(0,r._)("select",{class:"form-select",onChange:e=>s.selectBoxChangeEvent(e,t)},[M,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.selectBoxInfo.selectBoxListItems,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.key,value:e.key},(0,a.zw)(e.view),9,Q)))),128))],40,S)])):"date"===t.modifyType?((0,r.wg)(),(0,r.iD)("td",A,[(0,r.wy)((0,r._)("input",{class:"form-control",type:"date","onUpdate:modelValue":e=>o.item[t.propertyName]=e},null,8,j),[[l.nr,o.item[t.propertyName]]])])):((0,r.wg)(),(0,r.iD)("td",K,(0,a.zw)(o.item[t.propertyName]),1))],64)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},["text"===t.modifyType?((0,r.wg)(),(0,r.iD)("td",R,(0,a.zw)(o.item[t.propertyName]),1)):"selectBox"===t.modifyType?((0,r.wg)(),(0,r.iD)("td",F,(0,a.zw)(o.item[t.propertyName]),1)):"date"===t.modifyType?((0,r.wg)(),(0,r.iD)("td",G,(0,a.zw)(o.item[t.propertyName]),1)):((0,r.wg)(),(0,r.iD)("td",J,(0,a.zw)(o.item[t.propertyName]),1))],64))],64)):(0,r.kq)("",!0)],64)))),256)),(0,r._)("td",X,[e.isUpdate&&!e.isInsert?((0,r.wg)(),(0,r.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>s.updateButtonClickEvent&&s.updateButtonClickEvent(...e))},"확인")):e.isUpdate&&e.isInsert?((0,r.wg)(),(0,r.iD)("button",{key:1,type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>s.insertButtonClickEvent&&s.insertButtonClickEvent(...e))},"등록")):e.isUpdate?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:2,type:"button",class:"btn btn-warning",onClick:t[2]||(t[2]=(...e)=>s.updateButtonClickEvent&&s.updateButtonClickEvent(...e))},"수정"))]),(0,r._)("td",ee,[e.isInsert?((0,r.wg)(),(0,r.iD)("button",{key:0,type:"button",class:"btn btn-dark",onClick:t[3]||(t[3]=(...e)=>s.cancelButtonClickEvent&&s.cancelButtonClickEvent(...e))},"취소")):((0,r.wg)(),(0,r.iD)("button",{key:1,type:"button",class:"btn btn-danger",onClick:t[4]||(t[4]=(...e)=>s.deleteButtonClickEvent&&s.deleteButtonClickEvent(...e))},"삭제"))])])}var oe={name:"EditableTableRow",props:{useIndex:Boolean,index:void 0|Number,initIsUpdate:Boolean,headerInfos:{type:Array,validate(e){return e.every((e=>e instanceof H))}},item:{type:Object},initIsInsert:{type:Boolean}},data:function(){return{isUpdate:this.initIsUpdate,isInsert:this.initIsInsert}},methods:{cancelButtonClickEvent(){this.$emit("cancelInsert")},selectBoxChangeEvent(e,t){if(!e.target.value)return;const o=t.selectBoxInfo,r=o.changeInfos,n=o.selectBoxListItems,i=n.find((t=>t.key===e.target.value));i&&i.change(this.item,r)},insertButtonClickEvent(){this.$emit("insertItem",this.item),this.isInsert=!1,this.isUpdate=!1},updateButtonClickEvent(){this.isUpdate?(this.$emit("updateItem",this.id,this.item),this.isUpdate=!1):this.isUpdate=!0},deleteButtonClickEvent(){confirm("정말 삭제하시겠습니까?")&&this.$emit("deleteItem",this.id)}},computed:{id(){const e=this.headerInfos.find((e=>e.isId));return this.item[e.propertyName]}}};const re=(0,O.Z)(oe,[["render",te]]);var ne=re,ie={name:"EditableTable",components:{EditableTableRow:ne,EditableTableHeader:V},props:{headerInfos:{type:Array,validate(e){return e.every((e=>e instanceof H))}},tableData:Array,emptyItem:Object,useIndex:Boolean},data:function(){return{isInsert:!1}},methods:{useInsert(){this.isInsert=!0},cancelInsert(){this.isInsert=!1},insertItem(e){this.$emit("insertItem",e),this.isInsert=!1},updateItem(e,t){this.$emit("updateItem",e,t)},deleteItem(e){this.$emit("deleteItem",e)}},computed:{columnLength(){let e=this.useIndex?3:2;return e+=this.headerInfos.length,e}}};const se=(0,O.Z)(ie,[["render",D]]);var ae=se;function le(e){if(!e)return[];const t=[new _({itemPropertyName:"employeeNo",selectBoxItemPropertyName:"employeeNo"}),new _({itemPropertyName:"name",selectBoxItemPropertyName:"name"}),new _({itemPropertyName:"rankName",selectBoxItemPropertyName:"rankName"})],o=e.map((e=>new B({key:e.employeeNo,value:e,view:`${e.employeeNo}/${e.name}`}))),r=new P({selectBoxListItems:o,changeInfos:t});return[new H({propertyOrder:1,propertyName:"employeeNo",columnName:"사번",modifyType:"selectBox",selectBoxInfo:r}),new H({propertyOrder:2,propertyName:"name",columnName:"이름",isModify:!1,isNonVisibleUpdate:!0}),new H({propertyOrder:3,propertyName:"rankName",columnName:"직위",isModify:!1,isNonVisibleUpdate:!0}),new H({propertyOrder:4,propertyName:"workDate",columnName:"출근일",modifyType:"date"}),new H({propertyOrder:5,propertyName:"memo",columnName:"메모",modifyType:"text"}),new H({propertyOrder:999,propertyName:"holidayWorkId",isVisible:!1,isId:!0})]}var de={name:"HolidayWorkTableContainer",components:{EditableTable:ae},data:()=>({year:(new Date).getFullYear(),pageNum:0,pageSize:10,month:null,query:"",emptyItem:new w.Z.HolidayWork({}),headerInfos:[],holidayWorkList:[],hasNextPage:!1,hasPreviousPage:!1}),computed:{years(){const e=(new Date).getFullYear(),t=[];for(let o=2015;o<=e;o++)t.push(o);return t},months(){const e=[];for(let t=1;t<=12;t++)e.push(t);return e}},methods:{async searchQuery(){const e=await w.Z.getHolidayWorkList({pageSize:this.pageSize,pageNum:this.pageNum,query:this.query,month:this.month,year:this.year});this.hasNextPage=e.hasNextPage,this.hasPreviousPage=e.hasPreviousPage;const t=this.convertObjects2HolidayWorks(e.content);Array.isArray(t)?(this.holidayWorkList=this.orderedData(this.headerInfos,t),console.log(this.holidayWorkList)):this.holidayWorkList=[],this.emptyItem=new w.Z.HolidayWork({})},convertObjects2HolidayWorks(e){if(Array.isArray(e)){const t=e.map((e=>new w.Z.HolidayWork(e)));return console.log(t),t}return[]},doNextPage(){this.pageNum++,this.searchQuery()},doPreviousPage(){this.pageNum--,this.pageNum<=0&&(this.hasPreviousPage=!1),this.searchQuery()},orderedHeadersInfo(e){return e.sort(((e,t)=>e.propertyOrder-t.propertyOrder))},orderedData(e,t){const o=this.orderedHeadersInfo(e),r=t.map((e=>{const t={};return o.forEach((o=>{const r=o.propertyName;e.hasOwnProperty(r)&&(t[r]=e[r])})),t}));return r},async initSimpleEmployeeList(){const e=await w.Z.getSimpleEmployeeList();this.headerInfos=this.orderedHeadersInfo(le(e))},async insertItem(e){e||alert("업데이트 할 데이터가 없습니다.");const t=await w.Z.insertHolidayWork(e);t&&await this.searchQuery()},async updateItem(e,t){e||alert("workId가 없습니다."),t||alert("업데이트 할 데이터가 없습니다.");const o=await w.Z.updateHolidayWork(e,t);o&&await this.searchQuery()},async deleteItem(e){e||alert("workId가 없습니다.");const t=await w.Z.deleteHolidayWork(e);t&&await this.searchQuery()}},mounted(){this.pageNum=0,this.query="",this.searchQuery(),this.initSimpleEmployeeList()}};const me=(0,O.Z)(de,[["render",k]]);var pe=me,ue={name:"holidayWorkView",components:{HolidayWorkTableContainer:pe},methods:{}};const ye=(0,O.Z)(ue,[["render",s],["__scopeId","data-v-9439127a"]]);var ce=ye}}]);
//# sourceMappingURL=593.ae3def19.js.map